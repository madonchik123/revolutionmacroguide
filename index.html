<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Revolution Macro Guide</title>

  <!-- StackEdit base typography -->
  <link rel="stylesheet" href="https://stackedit.io/style.css" />

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3CradialGradient id='g' cx='50%25' cy='40%25' r='70%25'%3E%3Cstop offset='0%25' stop-color='%2324f0ff' stop-opacity='1'/%3E%3Cstop offset='60%25' stop-color='%2324f0ff' stop-opacity='.35'/%3E%3Cstop offset='100%25' stop-color='%23090b10' stop-opacity='1'/%3E%3C/radialGradient%3E%3C/defs%3E%3Crect width='64' height='64' rx='14' fill='url(%23g)'/%3E%3Cpath d='M18 40c7-12 12-17 18-17 6 0 9 4 10 10-2 10-8 15-18 15-5 0-8-2-10-8z' fill='%23090b10' opacity='.9'/%3E%3Cpath d='M20 38c6-10 10-14 16-14 5 0 7 3 8 8-2 8-7 12-16 12-4 0-6-2-8-6z' fill='%2324f0ff' opacity='.9'/%3E%3C/svg%3E" />

  <style>
    :root{
      --pageBlue: #0b78ff;

      --panel: rgba(12, 14, 18, 0.88);
      --panel2: rgba(20, 24, 33, 0.70);
      --text: #e9e9ea;
      --muted: rgba(233,233,234,0.74);

      --neon: #24f0ff;
      --stroke: rgba(255,255,255,0.16);
      --stroke2: rgba(36,240,255,0.32);

      --shadow: 0 18px 46px rgba(0,0,0,0.28);
      --shadow2: 0 10px 28px rgba(0,0,0,0.22);

      --headerH: 96px;

      --navW: 190px;
      --navGap: 18px;
      --navRadius: 18px;

      --maxW: 1160px;
    }

    *{ box-sizing: border-box; }
    html{ scroll-behavior: auto; }
    body{
      margin:0;
      font-family: Arial, sans-serif;
      color: var(--text);
      min-height: 100vh;
      background:
        radial-gradient(1200px 740px at 18% 10%, rgba(36,240,255,0.14), transparent 60%),
        radial-gradient(900px 640px at 85% 25%, rgba(36,240,255,0.10), transparent 55%),
        linear-gradient(160deg, rgba(255,255,255,0.05), rgba(0,0,0,0.12)),
        var(--pageBlue);
    }

    /* ===== header ===== */
    .app-header{
      position: fixed;
      top:0; left:0; right:0;
      z-index: 9999;
      padding: 14px 18px 12px;
      background: rgba(10, 12, 16, 0.88);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255,255,255,0.12);
      box-shadow: 0 14px 30px rgba(0,0,0,0.25);
    }
    .app-header::after{
      content:"";
      position:absolute;
      left:0; right:0; bottom:-1px;
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(36,240,255,0.40), transparent);
      pointer-events:none;
    }

    .header-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      min-height: 44px;
    }

    .brand-wrap{
      display:flex;
      align-items:baseline;
      gap:10px;
      white-space: nowrap;
    }

    .brand-title{
      font-weight: 900;
      letter-spacing: 0.2px;
      font-size: 18px;
      display:flex;
      align-items:baseline;
      gap:10px;
    }
    .brand-title .brand{
      color: var(--text);
      text-shadow: 0 0 18px rgba(255,255,255,0.06);
    }

    .typingWrap{
      display:inline-flex;
      align-items:baseline;
      gap:4px;
      min-width: 240px;
    }
    .typing{
      color: var(--neon);
      text-shadow: 0 0 16px rgba(36,240,255,0.30);
      font-weight: 900;
    }
    .caret{
      display:inline-block;
      color: var(--neon);
      opacity: 0.95;
      transform: translateY(1px);
      animation: blink 1s steps(1, end) infinite;
      text-shadow: 0 0 16px rgba(36,240,255,0.30);
    }
    @keyframes blink{ 50%{ opacity: 0; } }

    .header-actions{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap: wrap;
      justify-content:flex-end;
    }

    .pill-link{
      text-decoration:none;
      color: var(--text);
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(15,17,21,0.62);
      padding: 10px 14px;
      border-radius: 14px;
      box-shadow: 0 10px 22px rgba(0,0,0,0.18);
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      display:inline-flex;
      align-items:center;
      user-select:none;
      cursor:pointer;
    }
    .pill-link:hover{
      transform: translateY(-1px);
      border-color: rgba(36,240,255,0.35);
      background: rgba(15,17,21,0.78);
    }

    .hamburger{
      display:none;
      width: 42px;
      height: 42px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(15,17,21,0.62);
      color: var(--neon);
      cursor:pointer;
      align-items:center;
      justify-content:center;
      box-shadow: 0 10px 22px rgba(0,0,0,0.18);
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
    }
    .hamburger:hover{
      transform: translateY(-1px);
      border-color: rgba(36,240,255,0.35);
      background: rgba(15,17,21,0.78);
    }

    .header-tabs{
      display:flex;
      align-items:flex-end;
      gap:10px;
      padding-top: 10px;
      flex-wrap: wrap;
    }

    .tab-btn{
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(15,17,21,0.55);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 14px;
      cursor:pointer;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      font-size: 15px;
      user-select:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .tab-btn:hover{
      transform: translateY(-1px);
      border-color: rgba(36,240,255,0.35);
      background: rgba(15,17,21,0.72);
    }
    .tab-btn.active{
      border-color: rgba(36,240,255,0.52);
      box-shadow: 0 0 0 1px rgba(36,240,255,0.18) inset, 0 0 26px rgba(36,240,255,0.10);
    }
    .tab-dot{
      width: 8px; height: 8px;
      border-radius: 999px;
      background: rgba(255,255,255,0.25);
      box-shadow: 0 0 0 2px rgba(0,0,0,0.2) inset;
    }
    .tab-btn.active .tab-dot{
      background: var(--neon);
      box-shadow: 0 0 18px rgba(36,240,255,0.35);
    }

    /* ===== app layout ===== */
    .app{
      padding-top: calc(var(--headerH) + 18px);
      padding-left: 18px;
      padding-right: 18px;
      padding-bottom: 28px;
    }

    .layout{
      display:grid;
      grid-template-columns: var(--navW) minmax(0, 1fr);
      gap: var(--navGap);
      max-width: calc(var(--maxW) + var(--navW) + var(--navGap));
      margin: 0 auto;
      align-items:start;
    }
    .layout.no-side{
      grid-template-columns: minmax(0, 1fr);
    }

    /* ===== sidebar ===== */
    .side{
      width: var(--navW);
      position: sticky;
      top: calc(var(--headerH) + 18px);
      align-self:start;

      border-radius: var(--navRadius);
      background:
        linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04)),
        rgba(3, 102, 252, 0.22);
      border: 1px solid rgba(255,255,255,0.14);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }

    .side-header{
      padding: 14px 12px 10px;
      border-bottom: 1px solid rgba(255,255,255,0.10);
      position:relative;
    }
    .side-header::after{
      content:"";
      position:absolute;
      left:10px; right:10px; bottom:-1px;
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(36,240,255,0.35), transparent);
      pointer-events:none;
    }
    .side-title{
      font-size: 13px;
      letter-spacing: 1px;
      font-weight: 900;
      text-transform: uppercase;
      color: rgba(233,233,234,0.88);
      text-shadow: 0 0 16px rgba(36,240,255,0.10);
    }

    .side-links{
      padding: 12px 10px 10px;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }

    .side-links a,
    .side-links button{
      display:block;
      width:100%;
      text-decoration:none;
      text-align:left;
      color: rgba(233,233,234,0.94);
      font-weight: 900;
      padding: 10px 10px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(15,17,21,0.55);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      user-select:none;
      cursor:pointer;
    }
    .side-links a:hover,
    .side-links button:hover{
      transform: translateY(-1px);
      border-color: rgba(36,240,255,0.32);
      background: rgba(15,17,21,0.70);
    }
    .side-links a.active{
      color: var(--neon);
      border-color: rgba(36,240,255,0.55);
      box-shadow: 0 0 0 1px rgba(36,240,255,0.12) inset, 0 0 26px rgba(36,240,255,0.10);
      text-shadow: 0 0 16px rgba(36,240,255,0.20);
    }

    .side-footer{
      padding: 0 10px 14px;
    }

    #sideTopBtn{
      margin-top: 10px;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      font-weight: 1000;
    }

    /* ===== panel ===== */
    .panel{
      border: 1px solid rgba(255,255,255,0.16);
      border-radius: 18px;
      background: rgba(15, 17, 21, 0.86);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      padding: 18px;
      overflow:hidden;
      min-height: 320px;
    }

    .tab-content{ display:none; }
    .tab-content.active{ display:block; animation: fadeInUp 220ms ease both; }
    @keyframes fadeInUp{
      from{ opacity: 0; transform: translateY(6px); }
      to{ opacity: 1; transform: translateY(0); }
    }

    .stackedit__html{ color: var(--text); }
    .stackedit__html h1, .stackedit__html h2, .stackedit__html h3, .stackedit__html h4,
    .stackedit__html p, .stackedit__html li{ color: var(--text); }
    .stackedit__html a{
      color: var(--text);
      text-decoration: underline;
      text-decoration-color: rgba(36,240,255,0.35);
    }

    /* REMOVE the weird lines on headers/subheaders */
    .stackedit__html h1,
    .stackedit__html h2{
      border: none !important;
      padding-bottom: 0 !important;
    }
    .stackedit__html h1::after,
    .stackedit__html h2::after{
      display:none !important;
    }

    /* copy buttons for code blocks */
    pre{
      position: relative;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(10,12,16,0.72);
      box-shadow: 0 10px 24px rgba(0,0,0,0.20);
      padding: 14px;
      overflow: auto;
    }
    pre code{
      color: var(--text);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 13px;
      line-height: 1.5;
    }
    .copy-btn{
      position:absolute;
      top:10px;
      right:10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(15,17,21,0.70);
      color: rgba(233,233,234,0.92);
      padding: 8px 10px;
      cursor:pointer;
      font-weight: 900;
      font-size: 12px;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      user-select:none;
    }
    .copy-btn:hover{
      transform: translateY(-1px);
      border-color: rgba(36,240,255,0.35);
      background: rgba(15,17,21,0.85);
    }
    .copy-btn.copied{
      color: var(--neon);
      border-color: rgba(36,240,255,0.55);
      box-shadow: 0 0 18px rgba(36,240,255,0.10);
    }

    /* ===== troubleshooting ===== */
    .ts-head{ margin-bottom: 10px; }
    .ts-title{
      margin: 0;
      font-size: 26px;
      font-weight: 1000;
      letter-spacing: 0.2px;
      border: none !important;
      padding-bottom: 0 !important;
    }
    .ts-title::after{ display:none !important; }

    .ts-sub{
      margin: 8px 0 0;
      color: var(--muted);
      line-height: 1.35;
      max-width: 760px;
    }

    .ts-toolbar{
      display:flex;
      flex-wrap: wrap;
      align-items:center;
      gap: 10px;
      margin: 14px 0 14px;
    }

    .ts-search{
      flex: 1;
      min-width: 220px;
      display:flex;
      gap: 10px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(10,12,16,0.48);
    }
    .ts-search input{
      width:100%;
      border:none;
      outline:none;
      background: transparent;
      color: var(--text);
      font-size: 15px;
    }
    .ts-search .icon{
      color: rgba(233,233,234,0.65);
      font-weight: 900;
    }

    .ts-filter-pill{
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(15,17,21,0.55);
      color: rgba(233,233,234,0.92);
      padding: 10px 12px;
      border-radius: 14px;
      cursor:pointer;
      font-weight: 1000;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      user-select:none;
      white-space: nowrap;
    }
    .ts-filter-pill:hover{
      transform: translateY(-1px);
      border-color: rgba(36,240,255,0.35);
      background: rgba(15,17,21,0.72);
    }
    .ts-filter-pill.active{
      color: var(--neon);
      border-color: rgba(36,240,255,0.55);
      box-shadow: 0 0 0 1px rgba(36,240,255,0.12) inset, 0 0 26px rgba(36,240,255,0.10);
    }

    .cat-grid{
      display:grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 12px;
      margin: 14px 0 14px;
    }

    .cat-card{
      border: 1px solid rgba(36,240,255,0.22);
      border-radius: 16px;
      background: rgba(10,12,16,0.42);
      padding: 14px;
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(0,0,0,0.18);
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      position: relative;
      overflow:hidden;
      user-select:none;
    }
    .cat-card::before{
      content:"";
      position:absolute;
      inset:-40px;
      background: radial-gradient(520px 180px at 20% 20%, rgba(36,240,255,0.18), transparent 60%);
      opacity: 0.9;
      pointer-events:none;
    }
    .cat-card:hover{
      transform: translateY(-2px);
      border-color: rgba(36,240,255,0.40);
      background: rgba(10,12,16,0.55);
    }
    .cat-card.active{
      border-color: rgba(36,240,255,0.62);
      box-shadow: 0 0 0 1px rgba(36,240,255,0.14) inset, 0 0 34px rgba(36,240,255,0.12);
    }

    .cat-title{ font-weight: 1000; font-size: 18px; color: var(--text); }
    .cat-sub{ color: var(--muted); margin-top: 6px; font-size: 13px; line-height: 1.25; }

    .issues-wrap{
      margin-top: 10px;
      display:flex;
      flex-direction:column;
      gap: 12px;
    }

    .issue-block{
      border: 1px solid rgba(255,255,255,0.14);
      border-radius: 16px;
      background: rgba(10,12,16,0.44);
      overflow:hidden;
      box-shadow: 0 10px 22px rgba(0,0,0,0.16);
    }

    .issue-title{
      width: 100%;
      text-align:left;
      appearance:none;
      border:none;
      background: transparent;
      color: var(--text);
      padding: 14px;
      font-size: 16px;
      font-weight: 1000;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      user-select:none;
    }
    .issue-title:hover{ background: rgba(15,17,21,0.35); }

    .issue-title .chev{
      color: rgba(233,233,234,0.70);
      font-weight: 1000;
      transition: transform .15s ease;
    }

    .issue-body{
      display:none;
      padding: 0 14px 14px;
      color: rgba(233,233,234,0.92);
      line-height: 1.45;
    }
    .issue-body.open{ display:block; animation: fadeInUp 180ms ease both; }

    .empty{
      padding: 14px;
      color: rgba(233,233,234,0.70);
      border: 1px dashed rgba(255,255,255,0.18);
      border-radius: 16px;
      background: rgba(10,12,16,0.30);
    }

    /* mobile */
    #backToTopMobile{
      position: fixed;
      right: 18px;
      bottom: 18px;
      z-index: 999;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(10,12,16,0.72);
      color: rgba(233,233,234,0.92);
      cursor:pointer;
      display:none;
      box-shadow: 0 10px 22px rgba(0,0,0,0.20);
    }
    #backToTopMobile:hover{
      border-color: rgba(36,240,255,0.35);
      color: var(--neon);
    }

    @media (max-width: 980px){
      .layout{ grid-template-columns: minmax(0, 1fr); }
      .side{ display:none; }
      .hamburger{ display:inline-flex; }
      .cat-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
    @media (max-width: 560px){
      .typingWrap{ min-width: 160px; }
      .cat-grid{ grid-template-columns: 1fr; }
      .pill-link{ padding: 10px 12px; }
      .tab-btn{ padding: 10px 12px; }
    }

    /* drawer (mobile quick jump) */
    .drawer-backdrop{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      backdrop-filter: blur(3px);
      z-index: 9998;
      display:none;
    }
    .drawer{
      position: fixed;
      top: var(--headerH);
      left: 12px;
      width: min(280px, calc(100vw - 24px));
      max-height: calc(100vh - var(--headerH) - 12px);
      overflow:auto;
      z-index: 9999;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.14);
      background:
        linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04)),
        rgba(3, 102, 252, 0.22);
      box-shadow: var(--shadow);
      display:none;
    }
    .drawer.open, .drawer-backdrop.open{ display:block; animation: fadeInUp 160ms ease both; }

    /* ===== music modal ===== */
    .modal-backdrop{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(6px);
      z-index: 10000;
      display:none;
    }
    .modal{
      position: fixed;
      z-index: 10001;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: min(820px, calc(100vw - 26px));
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(12, 14, 18, 0.92);
      box-shadow: 0 20px 70px rgba(0,0,0,0.40);
      display:none;
      overflow:hidden;
    }
    .modal.open, .modal-backdrop.open{ display:block; }
    .modal-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 14px 14px 12px;
      border-bottom: 1px solid rgba(255,255,255,0.10);
    }
    .modal-title{
      font-weight: 1000;
      letter-spacing: 0.2px;
      color: var(--text);
    }
    .modal-sub{
      margin-top: 2px;
      color: rgba(233,233,234,0.70);
      font-size: 13px;
      font-weight: 700;
    }
    .modal-close{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(15,17,21,0.62);
      color: rgba(233,233,234,0.92);
      padding: 10px 12px;
      cursor:pointer;
      font-weight: 1000;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
    }
    .modal-close:hover{
      transform: translateY(-1px);
      border-color: rgba(36,240,255,0.35);
      background: rgba(15,17,21,0.78);
      color: var(--neon);
    }
    .modal-body{
      padding: 14px;
    }
    .yt-wrap{
      border-radius: 16px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(10,12,16,0.55);
      box-shadow: 0 12px 28px rgba(0,0,0,0.26);
      aspect-ratio: 16 / 9;
      width: 100%;
    }
    .yt-wrap iframe{
      width:100%;
      height:100%;
      border:0;
      display:block;
    }
    .modal-foot{
      padding: 0 14px 14px;
      color: rgba(233,233,234,0.72);
      font-size: 12px;
      line-height: 1.35;
    }

    /* ===== language gate ===== */
    .lang-backdrop{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.72);
      backdrop-filter: blur(10px);
      z-index: 20000;
      display:none;
    }
    .lang-modal{
      position: fixed;
      z-index: 20001;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: min(560px, calc(100vw - 26px));
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(12, 14, 18, 0.96);
      box-shadow: 0 22px 70px rgba(0,0,0,0.55);
      overflow:hidden;
      display:none;
    }
    .lang-modal.open, .lang-backdrop.open{ display:block; }
    .lang-head{
      padding: 16px 16px 12px;
      border-bottom: 1px solid rgba(255,255,255,0.10);
      position:relative;
    }
    .lang-head::after{
      content:"";
      position:absolute;
      left:14px; right:14px; bottom:-1px;
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(36,240,255,0.40), transparent);
      pointer-events:none;
    }
    .lang-title{
      margin: 0;
      font-size: 18px;
      font-weight: 1000;
      letter-spacing: 0.2px;
      color: var(--text);
    }
    .lang-sub{
      margin: 8px 0 0;
      color: rgba(233,233,234,0.70);
      font-size: 13px;
      line-height: 1.35;
    }
    .lang-body{
      padding: 14px 16px 16px;
      display:flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    .lang-choice{
      flex: 1;
      min-width: 200px;
      border-radius: 16px;
      border: 1px solid rgba(36,240,255,0.22);
      background: rgba(10,12,16,0.50);
      padding: 14px;
      cursor:pointer;
      box-shadow: 0 12px 28px rgba(0,0,0,0.22);
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      user-select:none;
      text-align:left;
    }
    .lang-choice:hover{
      transform: translateY(-2px);
      border-color: rgba(36,240,255,0.40);
      background: rgba(10,12,16,0.62);
    }
    .lang-choice .big{
      font-weight: 1000;
      font-size: 16px;
      color: var(--text);
    }
    .lang-choice .small{
      margin-top: 6px;
      color: rgba(233,233,234,0.70);
      font-size: 13px;
      line-height: 1.3;
    }
  </style>
</head>

<body>
  <!-- Language gate -->
  <div id="langBackdrop" class="lang-backdrop" aria-hidden="true"></div>
  <div id="langModal" class="lang-modal" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Choose language">
    <div class="lang-head">
      <h3 class="lang-title" id="langTitle">Choose your language</h3>
      <p class="lang-sub" id="langSub">You can change this later.</p>
    </div>
    <div class="lang-body">
      <button class="lang-choice" id="chooseEN" type="button">
        <div class="big">English</div>
        <div class="small">Use the site in English.</div>
      </button>
      <button class="lang-choice" id="chooseRU" type="button">
        <div class="big">Русский</div>
        <div class="small">Использовать сайт на русском.</div>
      </button>
    </div>
  </div>

  <!-- Music modal -->
  <div id="musicBackdrop" class="modal-backdrop" aria-hidden="true"></div>
  <div id="musicModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Music Player">
    <div class="modal-head">
      <div>
        <div class="modal-title" id="musicModalTitle">Music</div>
        <div class="modal-sub" id="musicModalSub">Note Block Hypixel Skyblock OST — Sky of Trees (Forest Islands)</div>
      </div>
      <button id="musicClose" class="modal-close" type="button">Close</button>
    </div>
    <div class="modal-body">
      <div class="yt-wrap">
        <iframe
          id="musicFrame"
          src="https://www.youtube.com/embed/x3bBQasjbfs?loop=1&playlist=x3bBQasjbfs&controls=1&modestbranding=1&rel=0"
          title="Music Player"
          allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen>
        </iframe>
      </div>
    </div>
    <div class="modal-foot" id="musicModalFoot">
      If it does not start automatically, press Play in the video player. It will loop.
    </div>
  </div>

  <!-- Mobile drawer -->
  <div id="drawerBackdrop" class="drawer-backdrop" aria-hidden="true"></div>
  <div id="drawer" class="drawer" aria-hidden="true">
    <div class="side-header">
      <div class="side-title" id="drawerQuickJumpTitle">Quick Jump</div>
    </div>
    <div id="drawerLinks" class="side-links"></div>
    <div class="side-footer">
      <button id="drawerTopBtn" type="button">Top</button>
    </div>
  </div>

  <!-- SINGLE header -->
  <header class="app-header" id="appHeader">
    <div class="header-row">
      <div class="brand-wrap">
        <button id="hamburger" class="hamburger" title="Open Quick Jump" aria-label="Open Quick Jump">☰</button>

        <div class="brand-title">
          <span class="brand">Revolution Macro</span>
          <span class="typingWrap">
            <span class="typing" id="typingWord"></span><span class="caret" id="typingCaret">|</span>
          </span>
        </div>
      </div>

      <div class="header-actions">
        <button class="pill-link" id="musicBtn" type="button">Music</button>

        <a class="pill-link" id="openIssuesBtn" href="https://github.com/RevolutionGuides/revolutionmacroguide/issues" target="_blank" rel="noopener noreferrer">
          Open Issues
        </a>
        <a class="pill-link" id="submitFixBtn" href="https://github.com/RevolutionGuides/revolutionmacroguide/issues/new?template=troubleshooting.yml" target="_blank" rel="noopener noreferrer">
          Submit Fix
        </a>

        <button class="pill-link" id="langBtn" type="button">EN</button>
      </div>
    </div>

    <div class="header-tabs">
      <button class="tab-btn active" id="tabGuideBtn" type="button" data-tab="guide">
        <span class="tab-dot"></span> <span id="tabGuideText">Clickpath Guide</span>
      </button>
      <button class="tab-btn" id="tabTroubleBtn" type="button" data-tab="troubleshooting">
        <span class="tab-dot"></span> <span id="tabTroubleText">Troubleshooting</span>
      </button>
    </div>
  </header>

  <main class="app">
    <div class="layout" id="layout">
      <!-- Sidebar (Guide only) -->
      <aside id="side" class="side" aria-label="Quick Jump">
        <div class="side-header">
          <div class="side-title" id="sideQuickJumpTitle">Quick Jump</div>
        </div>

        <!-- EXACTLY 6 items -->
        <nav id="guideNav" class="side-links"></nav>

        <div class="side-footer">
          <button id="sideTopBtn" type="button">Top</button>
        </div>
      </aside>

      <!-- Main content -->
      <section class="main">
        <div class="panel">
          <!-- GUIDE TAB -->
          <div id="guide" class="tab-content active">
            <div class="stackedit__html" id="guideContent"></div>
          </div>

          <!-- TROUBLESHOOTING TAB -->
          <div id="troubleshooting" class="tab-content">
            <div class="ts-head">
              <h2 class="ts-title" id="tsTitle">Troubleshooting</h2>
              <p class="ts-sub" id="tsSub">
                Pick a category, search within it, and expand an entry for the exact fix. If you found a new solution, submit it using the button in the header.
              </p>
            </div>

            <div class="cat-grid" id="catGrid">
              <div class="cat-card" data-cat="mac">
                <div class="cat-title" id="catMacTitle">Mac</div>
                <div class="cat-sub" id="catMacSub">Accessibility, permissions, macOS fixes</div>
              </div>
              <div class="cat-card" data-cat="windows">
                <div class="cat-title" id="catWinTitle">Windows</div>
                <div class="cat-sub" id="catWinSub">Capture mode, drivers, Windows fixes</div>
              </div>
              <div class="cat-card" data-cat="macro">
                <div class="cat-title" id="catMacroTitle">Macro</div>
                <div class="cat-sub" id="catMacroSub">Settings, patterns, routing, resets</div>
              </div>
              <div class="cat-card" data-cat="pro">
                <div class="cat-title" id="catProTitle">Pro</div>
                <div class="cat-sub" id="catProSub">Advanced tips, high efficiency setups</div>
              </div>
            </div>

            <div class="ts-toolbar">
              <div class="ts-search" title="Search current category">
                <span class="icon" id="tsSearchLabel">Search</span>
                <input id="tsSearch" type="text" placeholder="Search fixes..." />
              </div>

              <button id="allCatsBtn" class="ts-filter-pill active" type="button">All</button>
              <button class="ts-filter-pill" type="button" data-filter="mac" id="pillMac">Mac</button>
              <button class="ts-filter-pill" type="button" data-filter="windows" id="pillWin">Windows</button>
              <button class="ts-filter-pill" type="button" data-filter="macro" id="pillMacro">Macro</button>
              <button class="ts-filter-pill" type="button" data-filter="pro" id="pillPro">Pro</button>
            </div>

            <div id="issues" class="issues-wrap"></div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <button id="backToTopMobile" type="button">Top</button>

  <script>
    /* ===== language ===== */
    const I18N = {
      en: {
        htmlLang: "en",
        langBtn: "EN",
        langGateTitle: "Choose your language",
        langGateSub: "You can change this later.",
        langChoiceENBig: "English",
        langChoiceENSmall: "Use the site in English.",
        langChoiceRUBig: "Русский",
        langChoiceRUSmall: "Use the site in Russian.",
        musicBtn: "Music",
        openIssues: "Open Issues",
        submitFix: "Submit Fix",
        tabGuide: "Clickpath Guide",
        tabTrouble: "Troubleshooting",
        quickJump: "Quick Jump",
        top: "Top",
        typingWords: ["Guide", "Troubleshooting Help"],
        tsTitle: "Troubleshooting",
        tsSub: "Pick a category, search within it, and expand an entry for the exact fix. If you found a new solution, submit it using the button in the header.",
        searchLabel: "Search",
        searchPlaceholder: "Search fixes...",
        all: "All",
        catMacSub: "Accessibility, permissions, macOS fixes",
        catWinSub: "Capture mode, drivers, Windows fixes",
        catMacroSub: "Settings, patterns, routing, resets",
        catProSub: "Advanced tips, high efficiency setups",
        modalClose: "Close",
        musicFoot: "If it does not start automatically, press Play in the video player. It will loop.",
        loadingFixes: "Loading fixes…",
        noMatches: "No matching entries yet.",
        loadFail: "Could not load troubleshooting.json.",
        copy: "Copy",
        copied: "Copied",
        failed: "Failed",
        nav: {
          gather: "Gather Tab (1)",
          collect: "Collect Tab (2)",
          planters: "Planters Tab (3)",
          status: "Status Tab (4)",
          tools: "Tools Tab (5)",
          settings: "Settings Tab (6)"
        }
      },
      ru: {
        htmlLang: "ru",
        langBtn: "RU",
        langGateTitle: "Выберите язык",
        langGateSub: "Можно изменить позже",
        langChoiceENBig: "English",
        langChoiceENSmall: "Использовать сайт на английском",
        langChoiceRUBig: "Русский",
        langChoiceRUSmall: "Использовать сайт на русском",
        musicBtn: "Музыка",
        openIssues: "Открыть Issues",
        submitFix: "Отправить решение",
        tabGuide: "Гайд по вкладкам макроса",
        tabTrouble: "Проблемы и решения",
        quickJump: "Быстрый переход",
        top: "Наверх",
        typingWords: ["Гайд", "Помощь"],
        tsTitle: "Проблемы и решения",
        tsSub: "Выбрав категорию, ищите название вашей проблемы, затем нажмите на неё, чтобы увидеть точное решение. Если нашли новое решение — отправьте его через кнопку &quot;Отправить решение&quot;.",
        searchLabel: "Поиск",
        searchPlaceholder: "Искать решения...",
        all: "Всё",
        catMacSub: "Специальные возможности, разрешения, исправления ошибок macOS",
        catWinSub: "Capture mode, драйвера, исправления ошибок Windows",
        catMacroSub: "Настройки, паттерны, маршруты, ресеты",
        catProSub: "Продвинутые советы, эффективность",
        modalClose: "Закрыть",
        musicFoot: "Если музыка не заиграет автоматически, нажмите &quot;Играть&quot; в плеере. Музыка будет играть по кругу.",
        loadingFixes: "Загрузка решений…",
        noMatches: "Совпадений не найдено.",
        loadFail: "Не удалось загрузить troubleshooting.json.",
        copy: "Копировать",
        copied: "Скопировано",
        failed: "Ошибка",
        nav: {
          gather: "Вкладка Gather (1)",
          collect: "Вкладка Collect (2)",
          planters: "Вкладка Planters (3)",
          status: "Вкладка Status (4)",
          tools: "Вкладка Tools (5)",
          settings: "Вкладка Settings (6)"
        }
      }
    };

    let CURRENT_LANG = "en";

    function applyLanguage(lang){
      if (!I18N[lang]) lang = "en";
      CURRENT_LANG = lang;
      const t = I18N[lang];

      document.documentElement.lang = t.htmlLang;

      const langBtn = document.getElementById("langBtn");
      if (langBtn) langBtn.textContent = t.langBtn;

      const langTitle = document.getElementById("langTitle");
      const langSub = document.getElementById("langSub");
      if (langTitle) langTitle.textContent = t.langGateTitle;
      if (langSub) langSub.textContent = t.langGateSub;

      const chooseEN = document.getElementById("chooseEN");
      const chooseRU = document.getElementById("chooseRU");
      if (chooseEN){
        chooseEN.querySelector(".big").textContent = t.langChoiceENBig;
        chooseEN.querySelector(".small").textContent = t.langChoiceENSmall;
      }
      if (chooseRU){
        chooseRU.querySelector(".big").textContent = t.langChoiceRUBig;
        chooseRU.querySelector(".small").textContent = t.langChoiceRUSmall;
      }

      const musicBtn = document.getElementById("musicBtn");
      if (musicBtn) musicBtn.textContent = t.musicBtn;

      const openIssuesBtn = document.getElementById("openIssuesBtn");
      if (openIssuesBtn) openIssuesBtn.firstChild.nodeValue = t.openIssues;

      const submitFixBtn = document.getElementById("submitFixBtn");
      if (submitFixBtn) submitFixBtn.firstChild.nodeValue = t.submitFix;

      const tabGuideText = document.getElementById("tabGuideText");
      const tabTroubleText = document.getElementById("tabTroubleText");
      if (tabGuideText) tabGuideText.textContent = t.tabGuide;
      if (tabTroubleText) tabTroubleText.textContent = t.tabTrouble;

      const sideQuick = document.getElementById("sideQuickJumpTitle");
      const drawerQuick = document.getElementById("drawerQuickJumpTitle");
      if (sideQuick) sideQuick.textContent = t.quickJump;
      if (drawerQuick) drawerQuick.textContent = t.quickJump;

      const sideTopBtn = document.getElementById("sideTopBtn");
      const drawerTopBtn = document.getElementById("drawerTopBtn");
      const backTopMobile = document.getElementById("backToTopMobile");
      if (sideTopBtn) sideTopBtn.textContent = t.top;
      if (drawerTopBtn) drawerTopBtn.textContent = t.top;
      if (backTopMobile) backTopMobile.textContent = t.top;

      const tsTitle = document.getElementById("tsTitle");
      const tsSub = document.getElementById("tsSub");
      if (tsTitle) tsTitle.textContent = t.tsTitle;
      if (tsSub) tsSub.textContent = t.tsSub;

      const tsSearchLabel = document.getElementById("tsSearchLabel");
      const tsSearch = document.getElementById("tsSearch");
      if (tsSearchLabel) tsSearchLabel.textContent = t.searchLabel;
      if (tsSearch) tsSearch.placeholder = t.searchPlaceholder;

      const allCatsBtn = document.getElementById("allCatsBtn");
      if (allCatsBtn) allCatsBtn.textContent = t.all;

      const catMacSub = document.getElementById("catMacSub");
      const catWinSub = document.getElementById("catWinSub");
      const catMacroSub = document.getElementById("catMacroSub");
      const catProSub = document.getElementById("catProSub");
      if (catMacSub) catMacSub.textContent = t.catMacSub;
      if (catWinSub) catWinSub.textContent = t.catWinSub;
      if (catMacroSub) catMacroSub.textContent = t.catMacroSub;
      if (catProSub) catProSub.textContent = t.catProSub;

      const musicModalTitle = document.getElementById("musicModalTitle");
      const musicClose = document.getElementById("musicClose");
      const musicFoot = document.getElementById("musicModalFoot");
      if (musicModalTitle) musicModalTitle.textContent = t.musicBtn;
      if (musicClose) musicClose.textContent = t.modalClose;
      if (musicFoot) musicFoot.textContent = t.musicFoot;

      // IMPORTANT: render guide + rebuild nav when language changes
      renderGuide();
      buildSixItemNav();
    }

    function openLanguageGate(){
      const bd = document.getElementById("langBackdrop");
      const md = document.getElementById("langModal");
      if (!bd || !md) return;
      bd.classList.add("open");
      md.classList.add("open");
      bd.setAttribute("aria-hidden", "false");
      md.setAttribute("aria-hidden", "false");
    }

    function closeLanguageGate(){
      const bd = document.getElementById("langBackdrop");
      const md = document.getElementById("langModal");
      if (!bd || !md) return;
      bd.classList.remove("open");
      md.classList.remove("open");
      bd.setAttribute("aria-hidden", "true");
      md.setAttribute("aria-hidden", "true");
    }

    function setLanguage(lang){
      localStorage.setItem("site_lang", lang);
      applyLanguage(lang);
      closeLanguageGate();
      TYPE_WORDS = I18N[CURRENT_LANG].typingWords;
    }

    /* keep header height synced */
    function syncHeaderHeight(){
      const header = document.getElementById("appHeader");
      if (!header) return;
      const h = header.offsetHeight || 96;
      document.documentElement.style.setProperty("--headerH", h + "px");
    }
    window.addEventListener("resize", syncHeaderHeight);

    /* smooth scroll disabled on mobile (per request) */
    function isMobile(){
      return window.matchMedia("(max-width: 980px)").matches;
    }

    function scrollToWithOffset(el){
      if (!el) return;
      syncHeaderHeight();
      const header = document.getElementById("appHeader");
      const offset = (header ? header.offsetHeight : 0) + 14;
      const y = el.getBoundingClientRect().top + window.pageYOffset - offset;
      window.scrollTo({ top: y, behavior: isMobile() ? "auto" : "smooth" });
    }

    /* tabs */
    const layout = document.getElementById("layout");
    const side = document.getElementById("side");

    function openTab(tabId){
      document.querySelectorAll(".tab-content").forEach(el => el.classList.remove("active"));
      document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));

      const active = document.getElementById(tabId);
      if (active) active.classList.add("active");

      const btn = document.querySelector(`.tab-btn[data-tab="${tabId}"]`);
      if (btn) btn.classList.add("active");

      const showNav = (tabId === "guide");
      if (showNav){
        side.style.display = "block";
        layout.classList.remove("no-side");
      } else {
        side.style.display = "none";
        layout.classList.add("no-side");
      }

      closeDrawer();
      if (tabId === "troubleshooting") ensureIssuesLoaded();

      syncHeaderHeight();
    }

    document.getElementById("tabGuideBtn").addEventListener("click", () => openTab("guide"));
    document.getElementById("tabTroubleBtn").addEventListener("click", () => openTab("troubleshooting"));

    /* drawer */
    const drawer = document.getElementById("drawer");
    const drawerBackdrop = document.getElementById("drawerBackdrop");
    const hamburger = document.getElementById("hamburger");

    function openDrawer(){
      syncHeaderHeight();
      drawer.classList.add("open");
      drawerBackdrop.classList.add("open");
      drawer.setAttribute("aria-hidden", "false");
      drawerBackdrop.setAttribute("aria-hidden", "false");
    }
    function closeDrawer(){
      drawer.classList.remove("open");
      drawerBackdrop.classList.remove("open");
      drawer.setAttribute("aria-hidden", "true");
      drawerBackdrop.setAttribute("aria-hidden", "true");
    }

    hamburger.addEventListener("click", () => {
      if (drawer.classList.contains("open")) closeDrawer();
      else openDrawer();
    });
    drawerBackdrop.addEventListener("click", closeDrawer);

    /* top buttons */
    function goTop(){
      window.scrollTo({ top: 0, behavior: isMobile() ? "auto" : "smooth" });
    }
    document.getElementById("sideTopBtn").addEventListener("click", goTop);
    document.getElementById("drawerTopBtn").addEventListener("click", () => { goTop(); closeDrawer(); });

    const backToTopMobile = document.getElementById("backToTopMobile");
    window.addEventListener("scroll", () => {
      const show = isMobile() && window.scrollY > 380;
      backToTopMobile.style.display = show ? "block" : "none";
    });
    backToTopMobile.addEventListener("click", goTop);

    /* music modal */
    const musicBtn = document.getElementById("musicBtn");
    const musicModal = document.getElementById("musicModal");
    const musicBackdrop = document.getElementById("musicBackdrop");
    const musicClose = document.getElementById("musicClose");

    function openMusic(){
      musicModal.classList.add("open");
      musicBackdrop.classList.add("open");
      musicModal.setAttribute("aria-hidden", "false");
      musicBackdrop.setAttribute("aria-hidden", "false");
    }
    function closeMusic(){
      musicModal.classList.remove("open");
      musicBackdrop.classList.remove("open");
      musicModal.setAttribute("aria-hidden", "true");
      musicBackdrop.setAttribute("aria-hidden", "true");
    }
    musicBtn.addEventListener("click", openMusic);
    musicClose.addEventListener("click", closeMusic);
    musicBackdrop.addEventListener("click", closeMusic);
    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && musicModal.classList.contains("open")) closeMusic();
    });

    /* language button */
    document.getElementById("langBtn").addEventListener("click", openLanguageGate);

    /* typewriter (slower, caret follows naturally) */
    let TYPE_WORDS = ["Guide", "Troubleshooting Help"];
    (function titleTypewriter(){
      const el = document.getElementById("typingWord");
      if (!el) return;

      let w = 0, i = 0, deleting = false;

      function tick(){
        const words = TYPE_WORDS;
        const word = words[w];

        if (!deleting){
          i++;
          el.textContent = word.slice(0, i);
          if (i >= word.length){
            deleting = true;
            return setTimeout(tick, 1600);
          }
          return setTimeout(tick, 120);
        } else {
          i--;
          el.textContent = word.slice(0, i);
          if (i <= 0){
            deleting = false;
            w = (w + 1) % words.length;
            return setTimeout(tick, 560);
          }
          return setTimeout(tick, 85);
        }
      }
      tick();
    })();

    /* ===== GUIDE CONTENT (EN + RU) =====
       IMPORTANT: same anchor IDs so sidebar links work in both languages. */
    const GUIDE_HTML_EN = `
      <h1 id="revolution-macro-guide-and-fixes">Revolution Macro Guide and Fixes</h1>
      <p><strong>Use this for reference!</strong></p>
      <p><strong>Button/Feature format:</strong></p>
      <ul>
        <li><em>Feature/Button Name</em>: <em>What it does</em></li>
      </ul>

      <h2 id="version-08c-pre-release-2">version 0.8c (Pre-release 2)</h2>
      <p>Please note that the macro needs to be at least 1920x1080 - 1366x768 resolution on windows, 100% scale, no HDR and no touchscreen</p>
      <p><strong>Default Key Binds:</strong></p>
      <ul>
        <li>START - F1</li>
        <li>PAUSE - F2</li>
        <li>STOP - F3</li>
      </ul>

      <h1 id="tabs-6-in-total">Tabs - 6 in total</h1>
      <ol>
        <li>Gather Tab</li>
        <li>Collect Tab</li>
        <li>Planters Tab</li>
        <li>Status Tab</li>
        <li>Tools Tab</li>
        <li>Settings Tab</li>
      </ol>

      <h1 id="gather-tab-1">Gather Tab (1)</h1>
      <h2 id="fields">Fields</h2>
      <ul>
        <li>To edit a field, click the pen icon, to paste pre-made settings, click the 6 dots icon, and click "Paste". Find pre-made settings in the Discord server -> #patterns-configs</li>
        <li>Editing the Field (Suggested to copy and paste pre-made settings from the Revolution Discord</li>
        <li>Disable drift detection (uses supreme saturator to align character) -> click the pen icon -> click "align" located under max backpack -> disable</li>
        <li>Walk or reset to hive: Skull Symbol and Person walking switch, per field setting</li>
      </ul>

      <h2 id="boosts">Boosts</h2>
      <ul>
        <li>Make sure your sprinkler is in slot 1</li>
        <li>Configure slots 2-7 to your liking</li>
      </ul>

      <h2 id="gather-settings">Gather settings</h2>
      <h3>General</h3>
      <ul>
        <li>Set sprinkler type to your current sprinkler in Bee Swarm</li>
        <li>If you are blue and macro in Pine tree and have good fps, enable "Use Fast Pine Return Path"</li>
        <li>Disable Gathering: Wait for tasks and prevent the macro from farming honey</li>
        <li>Use Dipper: Hold/Auto click your mouse</li>
        <li>Inactive Honey Timeout: Maximum amount of seconds before the macro stop gathering if no honey is being made, default is 10 seconds</li>
        <li>Full Bag Timeout: Maximum amount of seconds before stopping gathering if your capacity (aka. backpack) is full.</li>
      </ul>

      <h3>Drift</h3>
      <ul>
        <li>Detect Drift: Detects when you are going away from the center</li>
        <li>Enable Drift Compensation: Uses drift compensation if your character is drifting (also impacts camera drift)</li>
        <li>Enable Camera Drift Compensation: Uses camera drift compensation</li>
      </ul>

      <h3>Pathing</h3>
      <ul>
        <li>Pattern: Picks the gathering pattern, default is cornerxsnake</li>
        <li>Use Custom Pattern: Make your own gathering pattern</li>
        <li>Use Natro Pattern: Uses natro's pattern</li>
        <li>Use Pattern Annotation: Draws the pattern on your screen</li>
        <li>Use Field Drift Compensation: Uses drift compensation relative to the field</li>
      </ul>

      <h1 id="collect-tab-2">Collect Tab (2)</h1>
      <h2>General</h2>
      <ul>
        <li>Convert At: When to convert honey in your hive, default is 95%</li>
        <li>Convert: Turns conversion on or off</li>
        <li>Convert On Full: Converts when your bag is full, regardless of convert at</li>
        <li>Convert With 0 Honey: Converts when you have 0 honey (not recommended)</li>
        <li>Convert With 0 Honey Timeout: Maximum amount of seconds before converting with 0 honey</li>
        <li>Reset After Convert: Resets after conversion</li>
      </ul>

      <h2>Conversion</h2>
      <ul>
        <li>Use Converter: Uses the converter in your hive</li>
        <li>Use Micro Converter: Uses micro converter</li>
        <li>Use Balloon: Uses balloon</li>
      </ul>

      <h2>Snowflakes</h2>
      <ul><li>Gather Snowflakes: Collects snowflakes</li></ul>

      <h2>Puffs</h2>
      <ul>
        <li>Enabled: Collects puffs</li>
        <li>Puff Planter Type: Type of planter you are using for puff</li>
        <li>Puff Planter Field: Field where you place puff planter</li>
        <li>Puff Planter Interval: How often to check puffs</li>
      </ul>

      <h1 id="planters-tab-3">Planters Tab (3)</h1>
      <h2 id="auto-planters">Auto planters</h2>
      <h3>Settings</h3>
      <ul>
        <li>Enabled: Turn this on for automatic planters, if not then it's manual mode</li>
        <li>Degradation Multiplier: Default at 1.2x, ranges from 1.0 to 2.0, Encourage the algorithm to switch fields when placing the same planter</li>
        <li>Build Nectars: The popular option is 2 Build and 1 Maintain, you can only have 3 active planters at once</li>
        <li>Harvest Automatic: If disabled, you can choose your own min and max growth time for your planters</li>
        <li>Harvest Fully Grown: Will only harvest when your planters is at 100%</li>
      </ul>

      <h3>Nectar Goals</h3>
      <ul>
        <li>There are five types of Nectar: Invigorating, Satisfying, Motivating, Comforting and Refreshing</li>
        <li>You can set your own target percentage for each nectars</li>
        <li>You can drag them up or down to swap/change priority level</li>
      </ul>

      <h3>Fields</h3>
      <ul><li>You can select each fields to enable/disable planting in that field</li></ul>

      <h1 id="status-tab-4">Status Tab (4)</h1>
      <h2>General</h2>
      <ul><li>Shows your current status, what the macro is doing</li></ul>
      <h2>Stats</h2>
      <ul><li>Displays macro statistics, honey per hour, average honey per hour, etc</li></ul>
      <h2>Discord</h2>
      <ul><li>Discord Rich Presence: Shows your status on discord</li></ul>

      <h1 id="tools-tab-5">Tools Tab (5)</h1>
      <h2>General</h2>
      <ul>
        <li>Rejoin: Rejoins the server</li>
        <li>Respawn: Respawns your character</li>
        <li>Leave: Leaves the server</li>
      </ul>

      <h2>Packs</h2>
      <ul>
        <li>Enabled: Collects packs</li>
        <li>Use Natro Pack List: Uses natro's pack list</li>
      </ul>

      <h2>Quests</h2>
      <ul>
        <li>Enabled: Completes quests</li>
        <li>Use Quest Menu: Uses the quest menu</li>
      </ul>

      <h2>Mobs</h2>
      <ul>
        <li>Enabled: Kills mobs</li>
        <li>Use Mondo Hop: Hops mondo chick</li>
        <li>Use Vicious Bee Hop: Hops vicious bee</li>
      </ul>

      <h1 id="settings-tab-6">Settings Tab (6)</h1>
      <h2>Macro</h2>
      <h3>Appearance</h3>
      <ul>
        <li>Theme: dark mode ofc</li>
        <li>Always On Top: Only enable this if you need to always see the macro app window</li>
      </ul>

      <h3>Hotkeys</h3>
      <ul><li>Set your Start, Pause, Stop hotkeys here</li></ul>

      <h3>Capture</h3>
      <ul>
        <li>Fallback Capture Mode: Available options are Window, GPU, Legacy</li>
        <li>Detection Frame Rate: Lower = Less CPU usage, but less accurate buff detection and movement correction</li>
      </ul>

      <h3>Misc</h3>
      <ul>
        <li>Log Level: Set to 4 for maximum verbose logging (only for debugging), else keep at 0</li>
        <li>Load Timeout: Maximum seconds before aborting loading AI models (default is 30), set this to something high like 60 if your AI models aren't loading</li>
      </ul>

      <h2>Game</h2>
      <h3>Movement</h3>
      <ul>
        <li>Player Movespeed: Your BSS movespeed (ingame) WITHOUT any speed buffs</li>
        <li>Camera Sensitivity: Set to your current in-game settings, or press the eye icon for auto detect</li>
        <li>Key Delay: Default at 20ms, Set this higher to 30-50 if you have low FPS</li>
        <li>Pattern Retry Count: How many times should the macro attempt to do navigations before giving up on the task</li>
      </ul>

      <h3>Routing</h3>
      <ul>
        <li>Use High Alignment: Turn this on if you have low FPS or pathing issues</li>
        <li>Disable Red Cannon: Only turn this on if you can't use the red cannon</li>
      </ul>

      <h3>Join</h3>
      <ul>
        <li>Preferred Hive Slot: Slot 6 to 1, 6 being closest to noob shop and 1 closest to red cannon</li>
        <li>Hive Claim Method: Default is Detect, set it to Check if it's not working</li>
        <li>Private Server Link: Paste your private server link in here</li>
        <li>Fallback the Public Server: Join public servers if the macro is having trouble joining the private server</li>
      </ul>

      <h2>Networking</h2>
      <ul>
        <li>Identity: Your current network identity (differs in RDPs)</li>
        <li>Relay: Click start</li>
        <li>Auto-Start: Turn this on if you're constantly using alts</li>
        <li>Auto-Connect: Connect to the relay on start</li>
        <li>Available Relays: Click the plus icon to add a relay, Click the entry icon on your added relay to join it, Click the star icon to your added relay to remove it</li>
      </ul>

      <h2>Presets</h2>
      <ul><li>WIP.</li></ul>

      <h2>Accounts</h2>
      <ul><li>WIP.</li></ul>

      <h2>Credits</h2>
      <ul><li>List of people who helped developed the macro and donators</li></ul>

      <hr />
      <p>Made by draco, credits to imes, JustZero</p>
    `;

    const GUIDE_HTML_RU = `
      <h1 id="revolution-macro-guide-and-fixes">Revolution Macro — Гайд и фиксы</h1>
      <p><strong>Используйте это как справочник.</strong></p>
      <p><strong>Формат кнопки/функции:</strong></p>
      <ul>
        <li><em>Название функции/кнопки</em>: <em>Что делает</em></li>
      </ul>

      <h2 id="version-08c-pre-release-2">версия 0.8c (Pre-release 2)</h2>
      <p>Важно: разрешение вашего экрана должно быть в пределах от 1920x1080 до 1366x768 на Windows, масштаб 100%, без использования HDR и сенсорного экрана.</p>
      <p><strong>Стандартные горячие клавиши:</strong></p>
      <ul>
        <li>START - F1</li>
        <li>PAUSE - F2</li>
        <li>STOP - F3</li>
      </ul>

      <h1 id="tabs-6-in-total">Вкладки — всего 6</h1>
      <ol>
        <li>Gather</li>
        <li>Collect</li>
        <li>Planters</li>
        <li>Status</li>
        <li>Tools</li>
        <li>Settings</li>
      </ol>

      <h1 id="gather-tab-1">Вкладка Gather (1)</h1>
      <h2 id="fields">Fields</h2>
      <ul>
        <li>Чтобы редактировать поле: нажмите на значок ручки справа от выбранного поля. Чтобы вставить готовые настройки: нажмите на 6 точками и выберите “Paste”. Готовые настройки ищите в Discord -> #patterns-configs</li>
        <li>Редактирование поля (рекомендуется копировать/вставлять готовые настройки из Discord Revolution)</li>
        <li>Выключите drift detection (использует Supreme Saturator для выравнивания персонажа): нажмите на значёк ручки -> “align” под max backpack -> disable</li>
        <li>Возврат к улью(return method): переключатель “череп” и “стикман” — зависит от настройки паттерна</li>
      </ul>

      <h2 id="boosts">Boosts</h2>
      <ul>
        <li>Убедитесь, что ваш sprinkler стоит в 1 слоте</li>
        <li>Настройте слоты 2–7 как вам нужно</li>
      </ul>

      <h2 id="gather-settings">Настройки Gather</h2>
      <h3>General</h3>
      <ul>
        <li>Выберите тип вашего sprinkler</li>
        <li>Если вы синей пыльце, макросите на Pine Tree поле, и у вас хороший FPS — включите “Use Fast Pine Return Path”</li>
        <li>Disable Gathering: Заставляет макрос ждать заданий/квестов, выключает фарм мёда</li>
        <li>Use Dipper: удерживает/кликает ЛКМ, заставляя использовать инструмент в вашей руке</li>
        <li>Inactive Honey Timeout: максимальное количество секунд, после которых макрос прекратит фарм, если мёд не прибавляется (по умолчанию 10)</li>
        <li>Full Bag Timeout: максимальное количество секунд до остановки фарма при полном рюкзаке (capacity)</li>
      </ul>

      <h3>Drift</h3>
      <ul>
        <li>Detect Drift: определяет, когда вы уходите от центра</li>
        <li>Enable Drift Compensation: включает компенсацию отклонения, если персонаж “отходит” (также влияет на дрифт камеры)</li>
        <li>Enable Camera Drift Compensation: компенсация отклонения камеры</li>
      </ul>

      <h3>Pathing</h3>
      <ul>
        <li>Pattern: выбор паттерна фарма, по умолчанию cornerxsnake</li>
        <li>Use Custom Pattern: использовать свой паттерн</li>
        <li>Use Natro Pattern: паттерн Natro</li>
        <li>Use Pattern Annotation: рисует паттерн на экране</li>
        <li>Use Field Drift Compensation: компенсация отклонения относительно поля</li>
      </ul>

      <h1 id="collect-tab-2">Вкладка Collect (2)</h1>
      <h2>General</h2>
      <ul>
        <li>Convert At: когда конвертить honey в улье, по умолчанию 95%</li>
        <li>Convert: включить/выключить конвертацию</li>
        <li>Convert On Full: конвертить при полном рюкзаке независимо от Convert At</li>
        <li>Convert With 0 Honey: конвертить при 0 honey (не рекомендуется)</li>
        <li>Convert With 0 Honey Timeout: максимум секунд до конверта при 0 honey</li>
        <li>Reset After Convert: reset после конвертации</li>
      </ul>

      <h2>Conversion</h2>
      <ul>
        <li>Use Converter: использовать конвертер в улье</li>
        <li>Use Micro Converter: использовать micro converter</li>
        <li>Use Balloon: использовать balloon</li>
      </ul>

      <h2>Snowflakes</h2>
      <ul><li>Gather Snowflakes: собирать снежинки</li></ul>

      <h2>Puffs</h2>
      <ul>
        <li>Enabled: собирать puffs</li>
        <li>Puff Planter Type: тип planter для puff</li>
        <li>Puff Planter Field: поле, куда ставить puff planter</li>
        <li>Puff Planter Interval: как часто проверять puffs</li>
      </ul>

      <h1 id="planters-tab-3">Вкладка Planters (3)</h1>
      <h2 id="auto-planters">Auto planters</h2>
      <h3>Settings</h3>
      <ul>
        <li>Enabled: включите для авто-planters, иначе ручной режим</li>
        <li>Degradation Multiplier: по умолчанию 1.2x (1.0–2.0). Помогает алгоритму менять поля при установке одного и того же planter</li>
        <li>Build Nectars: популярный вариант — 2 Build и 1 Maintain. Одновременно может быть только 3 активных planter</li>
        <li>Harvest Automatic: если выключено — можно выбрать свои min/max время роста</li>
        <li>Harvest Fully Grown: собирать только при 100%</li>
      </ul>

      <h3>Nectar Goals</h3>
      <ul>
        <li>Есть 5 типов Нектара: Invigorating, Satisfying, Motivating, Comforting, Refreshing</li>
        <li>Можно поставить процент нектара к которому макрос будет стремиться</li>
        <li>Можно перетаскивать вверх/вниз, чтобы менять приоритет</li>
      </ul>

      <h3>Fields</h3>
      <ul><li>Можно включать/выключать посадку на каждом поле</li></ul>

      <h1 id="status-tab-4">Вкладка Status (4)</h1>
      <h2>General</h2>
      <ul><li>Показывает текущий статус: что делает макро</li></ul>
      <h2>Stats</h2>
      <ul><li>Статистика: honey/hour, средний honey/hour и т.д.</li></ul>
      <h2>Discord</h2>
      <ul><li>Discord Rich Presence: показывает статус в Discord</li></ul>

      <h1 id="tools-tab-5">Вкладка Tools (5)</h1>
      <h2>General</h2>
      <ul>
        <li>Rejoin: переподключиться к серверу</li>
        <li>Respawn: respawn персонажа</li>
        <li>Leave: выйти с сервера</li>
      </ul>

      <h2>Packs</h2>
      <ul>
        <li>Enabled: собирать packs</li>
        <li>Use Natro Pack List: список packs от Natro</li>
      </ul>

      <h2>Quests</h2>
      <ul>
        <li>Enabled: выполнять quests</li>
        <li>Use Quest Menu: использовать quest menu</li>
      </ul>

      <h2>Mobs</h2>
      <ul>
        <li>Enabled: убивать mobs</li>
        <li>Use Mondo Hop: mondo hop</li>
        <li>Use Vicious Bee Hop: vicious bee hop</li>
      </ul>

      <h1 id="settings-tab-6">Вкладка Settings (6)</h1>
      <h2>Macro</h2>
      <h3>Appearance</h3>
      <ul>
        <li>Theme: dark mode</li>
        <li>Always On Top: включайте только если нужно постоянно видеть окно макро</li>
      </ul>

      <h3>Hotkeys</h3>
      <ul><li>Настройте хоткеи Start/Pause/Stop здесь</li></ul>

      <h3>Capture</h3>
      <ul>
        <li>Fallback Capture Mode: варианты Window, GPU, Legacy</li>
        <li>Detection Frame Rate: ниже = меньше CPU, но хуже детект бафов и коррекция движения</li>
      </ul>

      <h3>Misc</h3>
      <ul>
        <li>Log Level: 4 для детального логирования (только для дебага), иначе 0</li>
        <li>Load Timeout: максимум секунд ожидания загрузки AI models (по умолчанию 30). Если модели не грузятся — попробуйте 60</li>
      </ul>

      <h2>Game</h2>
      <h3>Movement</h3>
      <ul>
        <li>Player Movespeed: скорость в BSS без speed buffs</li>
        <li>Camera Sensitivity: выставьте как в игре или нажмите “eye” для авто-детекта</li>
        <li>Key Delay: по умолчанию 20ms. При низком FPS поставьте 30–50</li>
        <li>Pattern Retry Count: сколько раз пытаться навигировать перед тем как сдаться</li>
      </ul>

      <h3>Routing</h3>
      <ul>
        <li>Use High Alignment: включайте при низком FPS или проблемах pathing</li>
        <li>Disable Red Cannon: включайте только если red cannon нельзя использовать</li>
      </ul>

      <h3>Join</h3>
      <ul>
        <li>Preferred Hive Slot: 6–1 (6 ближе к noob shop, 1 ближе к red cannon)</li>
        <li>Hive Claim Method: по умолчанию Detect, если не работает — Check</li>
        <li>Private Server Link: вставьте ссылку на приватный сервер</li>
        <li>Fallback the Public Server: переходить в публичные сервера если есть проблемы с приватным</li>
      </ul>

      <h2>Networking</h2>
      <ul>
        <li>Identity: текущая network identity (в RDP отличается)</li>
        <li>Relay: нажмите start</li>
        <li>Auto-Start: включайте, если часто используете alts</li>
        <li>Auto-Connect: подключаться к relay при запуске</li>
        <li>Available Relays: “+” добавить relay, иконка entry — зайти, star — удалить</li>
      </ul>

      <h2>Presets</h2>
      <ul><li>WIP.</li></ul>

      <h2>Accounts</h2>
      <ul><li>WIP.</li></ul>

      <h2>Credits</h2>
      <ul><li>Список людей, которые помогали разработке и донатеры</li></ul>

      <hr />
      <p>Made by draco, credits to imes, JustZero</p>
    `;

    function renderGuide(){
      const el = document.getElementById("guideContent");
      if (!el) return;

      el.innerHTML = (CURRENT_LANG === "ru") ? GUIDE_HTML_RU : GUIDE_HTML_EN;

      addCopyButtons(el);
      // Rebuild nav after render (IDs exist now)
      // (buildSixItemNav() is called from applyLanguage too)
    }

    /* copy buttons on code blocks */
    function addCopyButtons(root){
      const blocks = (root || document).querySelectorAll("pre");
      blocks.forEach(pre => {
        if (pre.querySelector(".copy-btn")) return;

        const btn = document.createElement("button");
        btn.className = "copy-btn";
        btn.type = "button";
        btn.textContent = I18N[CURRENT_LANG].copy;

        btn.addEventListener("click", async () => {
          const code = pre.querySelector("code");
          const text = code ? code.innerText : pre.innerText;

          try{
            await navigator.clipboard.writeText(text);
            btn.classList.add("copied");
            btn.textContent = I18N[CURRENT_LANG].copied;
            setTimeout(() => {
              btn.classList.remove("copied");
              btn.textContent = I18N[CURRENT_LANG].copy;
            }, 900);
          }catch(e){
            btn.textContent = I18N[CURRENT_LANG].failed;
            setTimeout(() => (btn.textContent = I18N[CURRENT_LANG].copy), 900);
          }
        });

        pre.appendChild(btn);
      });
    }

    /* build EXACTLY 6 sidebar links (labels localized; IDs same) */
    function buildSixItemNav(){
      const nav = document.getElementById("guideNav");
      const drawerLinks = document.getElementById("drawerLinks");
      if (!nav || !drawerLinks) return;

      const t = I18N[CURRENT_LANG];

      const wanted = [
        { label: t.nav.gather, id: "gather-tab-1" },
        { label: t.nav.collect, id: "collect-tab-2" },
        { label: t.nav.planters, id: "planters-tab-3" },
        { label: t.nav.status, id: "status-tab-4" },
        { label: t.nav.tools, id: "tools-tab-5" },
        { label: t.nav.settings, id: "settings-tab-6" },
      ];

      nav.innerHTML = "";
      drawerLinks.innerHTML = "";

      wanted.forEach(item => {
        const targetEl = document.getElementById(item.id);
        if (!targetEl) return;

        const a = document.createElement("a");
        a.href = "#" + item.id;
        a.dataset.target = item.id;
        a.textContent = item.label;

        a.addEventListener("click", (e) => {
          e.preventDefault();
          scrollToWithOffset(targetEl);
          history.replaceState(null, "", "#" + item.id);
        });

        const b = a.cloneNode(true);
        b.addEventListener("click", (e) => {
          e.preventDefault();
          scrollToWithOffset(targetEl);
          history.replaceState(null, "", "#" + item.id);
          closeDrawer();
        });

        nav.appendChild(a);
        drawerLinks.appendChild(b);
      });

      setupActiveNavTracking(nav, wanted.map(x => x.id));
    }

    function setupActiveNavTracking(nav, ids){
      if (!("IntersectionObserver" in window)) return;
      const links = Array.from(nav.querySelectorAll("a[data-target]"));
      const map = new Map(links.map(a => [a.dataset.target, a]));

      const obs = new IntersectionObserver((entries) => {
        const visible = entries
          .filter(e => e.isIntersecting)
          .sort((a, b) => a.boundingClientRect.top - b.boundingClientRect.top);

        if (!visible.length) return;

        const id = visible[0].target.id;
        links.forEach(a => a.classList.remove("active"));
        const link = map.get(id);
        if (link) link.classList.add("active");
      }, {
        threshold: 0.25,
        rootMargin: "-25% 0px -65% 0px"
      });

      ids.forEach(id => {
        const el = document.getElementById(id);
        if (el) obs.observe(el);
      });
    }

    /* Troubleshooting: load + render */
    let TROUBLE_CACHE = null;
    let TROUBLE_LOADED = false;

    function stripEmoji(text){
      if (!text) return "";
      return text
        .replace(/:[a-zA-Z0-9_+-]+:/g, "")
        .replace(/[\u{1F300}-\u{1FAFF}]/gu, "")
        .replace(/\s{2,}/g, " ")
        .trim();
    }

    function getRepoContext(){
      return { owner: "RevolutionGuides", repo: "revolutionmacroguide", branch: "main" };
    }

    async function fetchTroubleJson(){
      const { owner, repo, branch } = getRepoContext();
      const cacheBust = Date.now();
      const tries = [
        `troubleshooting.json?v=${cacheBust}`,
        `https://raw.githubusercontent.com/${owner}/${repo}/${branch}/.github/troubleshooting.json?v=${cacheBust}`,
        `https://raw.githubusercontent.com/${owner}/${repo}/${branch}/troubleshooting.json?v=${cacheBust}`,
      ];

      let lastErr = null;
      for (const url of tries){
        try{
          const res = await fetch(url, { cache: "no-store" });
          if (!res.ok) throw new Error(`Fetch failed (${res.status}) for ${url}`);
          return await res.json();
        }catch(e){
          lastErr = e;
        }
      }
      throw lastErr || new Error("Failed to load troubleshooting.json");
    }

    async function ensureIssuesLoaded(){
      if (TROUBLE_LOADED) return;
      TROUBLE_LOADED = true;

      const container = document.getElementById("issues");
      container.innerHTML = `<div class="empty">${I18N[CURRENT_LANG].loadingFixes}</div>`;

      try{
        const data = await fetchTroubleJson();
        TROUBLE_CACHE = (data || []).map(i => ({
          title: stripEmoji(i.title || "Untitled fix"),
          category: (i.category || "").toLowerCase().trim(),
          solution: (i.solution || ""),
        }));
        renderTroubleshooting();
      }catch(err){
        console.error(err);
        container.innerHTML = `
          <div class="empty">
            ${I18N[CURRENT_LANG].loadFail}<br><br>
            Quick fix: keep a copy at repo root as <b>/troubleshooting.json</b> OR rely on the raw GitHub URL.
          </div>`;
      }
    }

    let activeCat = "all";
    let searchQ = "";

    const tsSearch = document.getElementById("tsSearch");
    tsSearch.addEventListener("input", (e) => {
      searchQ = (e.target.value || "").toLowerCase();
      renderTroubleshooting();
    });

    document.querySelectorAll(".cat-card").forEach(card => {
      card.addEventListener("click", () => {
        setCategory(card.dataset.cat || "all");
        const issuesEl = document.getElementById("issues");
        if (issuesEl) setTimeout(() => scrollToWithOffset(issuesEl), 40);
      });
    });

    const allCatsBtn = document.getElementById("allCatsBtn");
    allCatsBtn.addEventListener("click", () => setCategory("all"));
    document.querySelectorAll(".ts-filter-pill[data-filter]").forEach(btn => {
      btn.addEventListener("click", () => setCategory(btn.dataset.filter));
    });

    function setCategory(cat){
      activeCat = cat || "all";

      document.querySelectorAll(".ts-filter-pill").forEach(p => p.classList.remove("active"));
      if (activeCat === "all") allCatsBtn.classList.add("active");
      else {
        const pill = document.querySelector(`.ts-filter-pill[data-filter="${activeCat}"]`);
        if (pill) pill.classList.add("active");
      }

      document.querySelectorAll(".cat-card").forEach(c => c.classList.remove("active"));
      if (activeCat !== "all"){
        const card = document.querySelector(`.cat-card[data-cat="${activeCat}"]`);
        if (card) card.classList.add("active");
      }

      renderTroubleshooting();
    }

    function renderTroubleshooting(){
      const container = document.getElementById("issues");
      if (!container) return;

      const data = TROUBLE_CACHE || [];
      const filtered = data.filter(item => {
        const catOK = (activeCat === "all") ? true : item.category === activeCat;
        if (!catOK) return false;

        if (!searchQ) return true;
        const t = (item.title || "").toLowerCase();
        const b = (item.solution || "").toLowerCase();
        return t.includes(searchQ) || b.includes(searchQ);
      });

      if (!filtered.length){
        container.innerHTML = `<div class="empty">${I18N[CURRENT_LANG].noMatches}</div>`;
        return;
      }

      container.innerHTML = "";
      filtered.forEach((issue) => {
        const block = document.createElement("div");
        block.className = "issue-block";

        const btn = document.createElement("button");
        btn.className = "issue-title";
        btn.type = "button";

        const left = document.createElement("div");
        left.textContent = issue.title || "Untitled fix";

        const chev = document.createElement("div");
        chev.className = "chev";
        chev.textContent = "▾";

        btn.appendChild(left);
        btn.appendChild(chev);

        const body = document.createElement("div");
        body.className = "issue-body";
        body.innerHTML = issue.solution || "";

        btn.addEventListener("click", () => {
          const open = body.classList.toggle("open");
          chev.style.transform = open ? "rotate(180deg)" : "rotate(0deg)";
          if (open) addCopyButtons(body);
        });

        block.appendChild(btn);
        block.appendChild(body);
        container.appendChild(block);
      });
    }

    /* init language gate */
    document.getElementById("chooseEN").addEventListener("click", () => setLanguage("en"));
    document.getElementById("chooseRU").addEventListener("click", () => setLanguage("ru"));

    /* init */
    syncHeaderHeight();
    openTab("guide");

    (function initLang(){
      const saved = localStorage.getItem("site_lang");
      if (saved === "en" || saved === "ru"){
        applyLanguage(saved);
      } else {
        applyLanguage("en");
        openLanguageGate();
      }

      TYPE_WORDS = I18N[CURRENT_LANG].typingWords;

      // initial render (applyLanguage also renders)
      renderGuide();
      buildSixItemNav();
    })();

    /* allow ESC to close language gate only if language already chosen */
    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape"){
        const saved = localStorage.getItem("site_lang");
        if (saved === "en" || saved === "ru"){
          closeLanguageGate();
        }
      }
    });

    window.addEventListener("load", () => {
      syncHeaderHeight();
      const id = (location.hash || "").replace("#", "");
      if (id){
        const el = document.getElementById(id);
        if (el){
          setTimeout(() => scrollToWithOffset(el), 40);
        }
      }
    });
  </script>
</body>
</html>


